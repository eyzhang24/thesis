---
title: "misc_equations"
author: "Elizabeth Zhang"
date: "`r Sys.Date()`"
geometry: margin=1.5in
output: pdf_document
header-includes:
  - \usepackage{amsmath}
---

```{r}
library(tidyverse)
library(kableExtra)
library(knitr)
```

Kernel machine regression defines the regression relationship using a flexible function $h: \mathbb{R}^M \rightarrow \mathbb{R}$, where

$$
Y_i = h(\textbf{x}_i) + \textbf{z}_i^\top \boldsymbol{\beta}_{\textbf{z}} + \varepsilon_i,
$$

\noindent Here, $Y_i$ is the outcome at a given point, $\textbf{x}_i=[x_1,\dots,x_M]^\top$ is a vector of $M$ chemicals,  $\textbf{z}_i$ and $\boldsymbol{\beta}_{\textbf{z}}$ are vectors of covariates and their weights, respectively, and $\varepsilon_i \overset{\mathrm{iid}}{\sim} N(0, \sigma^2)$. 

\newpage

$h(\cdot)$ is obtained using the kernel $k: \mathbb{R}^M\times \mathbb{R}^M \rightarrow \mathbb{R}$, defined as 

$$
k(\textbf{x}, \textbf{x}') = \textrm{exp}\bigg\{
-\frac{||\textbf{x}-\textbf{x}'||^2}{\rho} \bigg\},
$$

\noindent where $x$ are the predictor values of a second subject, and $\rho$ is a tuning parameter. 

$$
Y = x_1 + x_2
$$

$$
Y = x_1 + x_2 + 0.5(x_1*x_2)
$$

$$
\widehat Y = \widehat{\beta}_0 + \widehat{\beta}_1x_1 + \widehat{\beta}_2x_2 + \widehat{\beta}_{12}x_1x_2
$$

```{r}
equations <- data.frame(
  type = c("Multiplicative", "Polynomial", 
           "Smaller category", "Larger category"), 
  small = c("0.35Hg$*$Ni", "0.13Hg$*($Ni$-1)^2$", 
            "0.5Hg$*\\text{race}_{\\text{black}}$", 
            "0.5Hg$*\\text{race}_{\\text{hisp.non}}$"), 
  large = c("0.7Hg$*$Ni", "0.26Hg$*($Ni$-1)^2$",  
            "Hg$*\\text{race}_{\\text{black}}$", 
            "Hg$*\\text{race}_{\\text{hisp.non}}$")
)
labels <- c(
  "Chemical by chemical" = 2, 
  "Chemical by race" = 2
)

equations |> 
  kbl(booktabs = TRUE, escape = FALSE, 
      col.names = c("", "Lower", "Higher"), 
      align = "lcc",
      caption = "Specification of interaction terms in simulations.") |> 
  column_spec(1, width = "10em") |> 
  add_header_above(header = c(" " = 1, "Effect size" = 2)) |>
  pack_rows(index = labels) 
```

